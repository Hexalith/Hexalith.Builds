name: 'Get Hexalith Version'
description: 'Gets the version from Hexalith.Version.props file and sets it as an environment variable'

inputs:
  version-path:
    description: 'Path to the Hexalith.Version.props file'
    required: false
    default: './Hexalith.Builds/Hexalith.Version.props'

outputs:
  version:
    description: 'The new release version'
    value: ${{ steps.version.outputs.version }}
  major:
    description: 'The new release major version'
    value: ${{ steps.version.outputs.major }}
  minor:
    description: 'The new release minor version'
    value: ${{ steps.version.outputs.minor }}
  patch:
    description: 'The new release patch version'
    value: ${{ steps.version.outputs.patch }}
  published:
    description: 'Whether a new release was published'
    value: ${{ steps.version.outputs.published }}

runs:
  using: "composite"
  steps:
    - name: Get Version
      id: version
      uses: Hexalith/Hexalith.Builds/Github/create-release@main
      with:
        dry_run: true
      env:
        GITHUB_TOKEN: ${{ env.GITHUB_TOKEN }}
